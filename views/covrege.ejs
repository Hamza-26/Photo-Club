<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="covrege.css">
  <link rel="icon" href="./photo-club-icon.ico" type="image/x-icon">

  <title>
    <%= covrg.ceremonyTitle %>
  </title>
</head>

<body>
  <header>
    <%- include('header') %>
  </header>

  <main>
    <div class="covregeContaner">
      <h3>
        <%= covrg.ceremonyTitle %>
      </h3>
      <p>
        <%= covrg.details %>
      </p>

      <div class="gallery" id="gallery">
        <% covrg.photos.forEach(function(photo) { %>
          <div class="photo">
            <img src="<%= photo %>" alt="---">
            <span>
              <i class="bi bi-cloud-download"></i>
              <i class="bi bi-eye"></i>
            </span>
          </div>
          <% }); %>
      </div>
    </div>

    <input type="file" id="fileInput" multiple style="display: none;">
    <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">

    <div class="button-add-search">
      <button type="button" id="addButton" class="btn btn-outline-primary">Add</button>
      <button type="button" class="btn btn-outline-secondary">Search</button>
    </div>

  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('addButton').addEventListener('click', function () {
        document.getElementById('fileInput').click();
      });

      document.getElementById('fileInput').addEventListener('change', function (event) {
        var files = event.target.files;
        if (files) {
          var gallery = document.getElementById('gallery');
          if (!gallery) {
            console.error('Gallery element not found!');
            return;
          }

          for (var i = 0; i < files.s; i++) {
            if (files[i].type.match('image.*')) { // Check if the file is an image
              var reader = new FileReader();

              reader.onload = (function (file) {
                return function (e) {
                  var newPhotoDiv = document.createElement('div');
                  newPhotoDiv.className = 'photo';

                  var newImage = document.createElement('img');
                  newImage.src = e.target.result;
                  newImage.alt = file.name; // Use the file's name as the alt text

                  var iconsSpan = document.createElement('span');
                  iconsSpan.innerHTML = '<i class="bi bi-cloud-download"></i><i class="bi bi-eye"></i>';

                  newPhotoDiv.appendChild(newImage);
                  newPhotoDiv.appendChild(iconsSpan);
                  gallery.appendChild(newPhotoDiv);
                };
              })(files[i]);

              reader.readAsDataURL(files[i]);
            }
          }
        }
      });
    });
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</body>

</html>