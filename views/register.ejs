<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./login.css">
    <link rel="icon" href="./photo-club-icon.ico" type="image/x-icon">

    <title>Register</title>
</head>

<body>
    <header>
        <%- include('header') %>

    </header>
    <main>
        <% if (messages.error) { %>
            <div id="error-message" class="errorMessage">
                <%= messages.error %>
            </div>
            <% } %>

                <div class="loginContainer">
                    <form action="/register" method="POST" class="login-form">
                        <% if(typeof userRole !== 'undefined' && userRole=="admin"){ %>
                            <h2>Add account</h2>
                        <% } else { %>
                            <h2>Register</h2>
                        <% } %>

                        <div>
                            <label for="name">Name</label>
                            <br>
                            <input type="text" id="name" name="name" required>
                        </div>

                        <div>
                            <label for="email">Email</label>
                            <br>
                            <input type="email" id="email" name="email" required>
                        </div>

                        <div>
                            <label for="password">Password</label>
                            <br>
                            <input type="password" id="password" name="password" required>
                        </div>

                        <% if (typeof userRole !== 'undefined' && userRole=="admin" ) { %>
                            <div>
                              <input type="radio" class="btn-check" name="role" id="option1" value="club" autocomplete="off" checked>
                              <label class="btn btn-secondary" for="option1">Club</label>
                          
                              <input type="radio" class="btn-check" name="role" id="option2" value="member" autocomplete="off">
                              <label class="btn btn-secondary" for="option2">Member</label>
                          
                              <input type="radio" class="btn-check" name="role" id="option3" value="admin" autocomplete="off">
                              <label class="btn btn-secondary" for="option3">Admin</label>
                            </div>
                          <% } else { %>
                            <!-- Note: No need to provide a name attribute if you're going to set the role to "visitor" in the backend -->
                            <input type="hidden" name="role" value="visitor" autocomplete="off">
                          <% } %>

                          <button type="submit">Register</button>

                    </form>
                    <a href="/login">Login</a>
                </div>
    </main>
    <script>            // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function () {
            // Check if the element exists
            var errorMessage = document.getElementById('error-message');
            if (errorMessage) {
                // Set a timeout to hide the message after 3 seconds (3000 milliseconds)
                setTimeout(function () {
                    errorMessage.style.display = 'none';
                }, 3000);
            }
        });
    </script>
</body>

</html>